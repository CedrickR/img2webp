<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Convertisseur d'images</title>
    <script>
      (function loadLocalAssets() {
        const baseUrl = new URL('./', window.location.href);

        const stylesheet = document.createElement('link');
        stylesheet.rel = 'stylesheet';
        stylesheet.href = new URL('styles.css', baseUrl).toString();
        document.head.appendChild(stylesheet);

        const script = document.createElement('script');
        script.src = new URL('app.js', baseUrl).toString();
        script.defer = true;
        document.head.appendChild(script);
      })();
    </script>
  </head>
  <body>
    <header class="site-header">
      <h1>Plateforme de conversion d'images</h1>
      <p>
        Importez vos photos, ajustez les curseurs de compression et de
        r√©duction en pourcentage puis t√©l√©chargez-les au format WebP, JPG ou PNG.
      </p>
    </header>
    <main>
      <section class="importer">
        <div id="dropZone" class="drop-zone" role="button" tabindex="0">
          <div class="drop-zone__icon" aria-hidden="true">‚¨ÜÔ∏è</div>
          <p class="drop-zone__title">D√©posez vos images ici</p>
          <p class="drop-zone__hint">
            Formats pris en charge&nbsp;: JPG, JPEG, PNG. Maximum 30 fichiers √† la fois.
          </p>
          <button type="button" class="drop-zone__button">Choisir des fichiers</button>
          <input
            id="fileInput"
            class="drop-zone__input"
            type="file"
            accept="image/jpeg,image/jpg,image/png"
            multiple
            aria-label="Importer des images"
          />
        </div>
        <div class="actions">
          <button id="downloadAll" class="btn" type="button" disabled>
            T√©l√©charger toutes les images
          </button>
          <button id="resetAll" class="btn btn--ghost" type="button" disabled>
            Vider la s√©lection
          </button>
        </div>
      </section>
      <section class="documentation" aria-labelledby="documentation-title">
        <div class="documentation__content">
          <h2 id="documentation-title">Documentation &amp; utilisation</h2>
          <p>
            Suivez ces √©tapes pour pr√©parer vos images avant t√©l√©chargement ou
            export group√©.
          </p>
          <ol class="documentation__steps">
            <li>
              Importez jusqu'√† 30 images en les d√©posant sur la zone pr√©vue ou
              via le bouton ¬´&nbsp;Choisir des fichiers&nbsp;¬ª.
            </li>
            <li>
              Ajustez les curseurs de compression et de r√©duction en
              pourcentage pour chaque vignette. Les statistiques se mettent √†
              jour automatiquement.
            </li>
            <li>
              Renommez vos fichiers si n√©cessaire, puis t√©l√©chargez-les
              individuellement ou r√©cup√©rez l'ensemble via le bouton de t√©l√©chargement global.
              Vous pouvez retirer une photo de la s√©lection via le bouton ‚úï si
              n√©cessaire.
            </li>
            <li>
              Consultez le r√©capitulatif pour visualiser le gain total avant de
              finaliser vos t√©l√©chargements.
            </li>
          </ol>
          <section class="documentation__tips" aria-label="Astuces">
            <h3>Astuce</h3>
            <p>
              Utilisez des valeurs de compression plus √©lev√©es (80&nbsp;% et +)
              pour conserver la qualit√©, ou r√©duisez-les pour privil√©gier la
              l√©g√®ret√© des fichiers.
            </p>
          </section>
        </div>
      </section>
      <section id="summary" class="summary" aria-live="polite" hidden>
        <div class="summary__content">
          <h2>R√©capitulatif des conversions</h2>
          <p class="summary__description">
            Suivez l'impact de vos r√©glages sur le poids total et le gain obtenu.
          </p>
          <dl class="summary__stats">
            <div class="summary__row">
              <dt>Poids original total</dt>
              <dd class="summary__original">0 o</dd>
            </div>
            <div class="summary__row">
              <dt>Poids converti total</dt>
              <dd class="summary__converted">0 o</dd>
            </div>
            <div class="summary__row">
              <dt>Gain total</dt>
              <dd class="summary__saving">0&nbsp;%</dd>
            </div>
          </dl>
        </div>
      </section>
      <section id="gallery" class="gallery" aria-live="polite"></section>
      <template id="imageCardTemplate">
        <article class="card">
          <div class="card__preview">
            <div class="crop-stage">
              <img class="card__thumbnail" alt="" loading="lazy" />
              <div class="crop-overlay" aria-hidden="true">
                <div class="crop-selection"></div>
              </div>
            </div>
            <button class="crop-apply-btn" type="button" disabled>
              Valider le recadrage
            </button>
          </div>
          <div class="card__content">
            <header class="card__header">
              <h2 class="card__title"></h2>
              <p class="card__meta"></p>
              <button class="card__remove" type="button" aria-label="Supprimer l'image">
                ‚úï
              </button>
            </header>
            <div class="card__controls">
              <div class="control-group control-group--compression">
                <label class="control-label" for="compression">
                  <span class="control-badge">‚öôÔ∏è</span>Taux de compression
                </label>
                <div class="slider-wrapper">
                  <input
                    class="compression-slider"
                    type="range"
                    min="1"
                    max="100"
                    value="80"
                  />
                  <span class="slider-value compression-value">80&nbsp;%</span>
                </div>
              </div>
              <div class="control-group control-group--size size-control-group">
                <label class="control-label">
                  <span class="control-badge">üìê</span>Taille de l'image
                </label>
                <div class="size-tabs" role="tablist" aria-label="Mode de redimensionnement">
                  <button class="size-tab-btn is-active" type="button" data-size-tab="pixels" role="tab" aria-selected="true">
                    Pixels
                  </button>
                  <button class="size-tab-btn" type="button" data-size-tab="percent" role="tab" aria-selected="false">
                    Pourcentage
                  </button>
                </div>
                <div class="size-panel" data-size-panel="pixels">
                  <div class="resize-fields">
                    <label class="resize-field">
                      <span>Largeur (px)</span>
                      <input
                        class="resize-width-input"
                        type="number"
                        min="1"
                        step="1"
                        inputmode="numeric"
                        placeholder="Auto"
                        aria-label="Largeur en pixels"
                      />
                    </label>
                    <label class="resize-field">
                      <span>Hauteur (px)</span>
                      <input
                        class="resize-height-input"
                        type="number"
                        min="1"
                        step="1"
                        inputmode="numeric"
                        placeholder="Auto"
                        aria-label="Hauteur en pixels"
                      />
                    </label>
                  </div>
                  <label class="keep-proportions-toggle">
                    <input class="keep-proportions-checkbox" type="checkbox" checked />
                    <span>Conserver les proportions</span>
                  </label>
                </div>
                <div class="size-panel is-hidden" data-size-panel="percent">
                  <div class="percent-options" role="radiogroup" aria-label="R√©duction en pourcentage">
                    <label class="percent-option">
                      <input class="percent-radio" type="radio" name="percentPreset" value="25" />
                      <span>25%</span>
                    </label>
                    <label class="percent-option">
                      <input class="percent-radio" type="radio" name="percentPreset" value="50" />
                      <span>50%</span>
                    </label>
                    <label class="percent-option">
                      <input class="percent-radio" type="radio" name="percentPreset" value="75" checked />
                      <span>75%</span>
                    </label>
                  </div>
                </div>
              </div>
              <div class="control-group control-group--crop">
                <label class="control-label">
                  <span class="control-badge">‚úÇÔ∏è</span>Recadrage
                </label>
                <div class="crop-actions">
                  <button class="crop-toggle-btn" type="button" aria-pressed="false">
                    Activer le recadrage
                  </button>
                  <button class="crop-reset-btn" type="button">
                    R√©initialiser le cadre
                  </button>
                </div>
                <p class="crop-help">Cliquez et glissez sur l'image pour d√©finir le cadre.</p>
              </div>
              <div class="control-group control-group--background">
                <label class="control-label">
                  <span class="control-badge">ü™Ñ</span>Suppression du fond
                </label>
                <label class="background-remove-toggle">
                  <input
                    class="background-remove-checkbox"
                    type="checkbox"
                    aria-label="Activer la suppression du fond"
                  />
                  <span>Supprimer automatiquement le fond</span>
                </label>
                <div class="background-tolerance-control">
                  <span class="background-tolerance-label">Tol√©rance</span>
                  <div class="slider-wrapper">
                    <input
                      class="background-tolerance-slider"
                      type="range"
                      min="10"
                      max="160"
                      step="1"
                      value="45"
                      aria-label="Tol√©rance de suppression de fond"
                    />
                    <span class="slider-value background-tolerance-value">45</span>
                  </div>
                </div>
                <div class="background-color-control">
                  <input
                    class="background-color-picker"
                    type="color"
                    value="#ffffff"
                    aria-label="S√©lecteur de couleur de fond"
                  />
                  <input
                    class="background-color-input"
                    type="text"
                    value="transparent"
                    placeholder="transparent, #ffffff, red"
                    aria-label="Couleur de fond en hexad√©cimal ou nom web"
                  />
                </div>
              </div>
            </div>
            <dl class="card__stats">
              <div class="stats-heading">Informations</div>
              <div class="stats-row">
                <dt>Poids original</dt>
                <dd class="original-size">-</dd>
              </div>
              <div class="stats-row">
                <dt>Poids converti</dt>
                <dd class="converted-size">-</dd>
              </div>
              <div class="stats-row">
                <dt>Taille originale</dt>
                <dd class="original-dimensions">-</dd>
              </div>
              <div class="stats-row">
                <dt>Nouvelle taille</dt>
                <dd class="new-dimensions">-</dd>
              </div>
            </dl>
            <div class="card__footer">
              <label class="filename-field">
                <span class="filename-label">Nom du fichier</span>
                <div class="filename-input-group">
                  <input
                    type="text"
                    class="filename-input"
                    maxlength="120"
                    placeholder="Nom du fichier"
                  />
                  <span class="filename-suffix" aria-hidden="true">.webp</span>
                </div>
              </label>
              <label class="output-format-field">
                <span class="filename-label">Format de sortie</span>
                <select class="output-format-select" aria-label="Format de sortie">
                  <option value="webp" selected>WebP</option>
                  <option value="jpg">JPG</option>
                  <option value="png">PNG</option>
                </select>
              </label>
              <button class="btn btn--primary download-btn" type="button">
                Valider
              </button>
            </div>
          </div>
        </article>
      </template>
    </main>
  </body>
</html>
